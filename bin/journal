#!/bin/bash

set -e

if [[ $# < 1 ]]
then
  echo "usage: journal 'message'"
  exit 1
fi

if [[ "$JOURNAL_ROOT" == "" ]]
then
    JOURNAL_ROOT="$HOME/Dropbox (Personal)/journal/"
fi

journal=$(date +"$JOURNAL_ROOT/%Y/%m/%d.txt")
dirname=${journal%/*}

mkdir -p "$dirname"
echo "$1" >> "$journal"
